local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Удаляем старый GUI
local old = playerGui:FindFirstChild("FluxClientGUI")
if old then old:Destroy() end

-- ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FluxClientGUI"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = playerGui

-- Главное окно
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 200, 0, 200)
mainFrame.Position = UDim2.new(0.5, -100, 0.5, -100)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui
mainFrame.ZIndex = 2

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 18)
mainCorner.Parent = mainFrame

-- Заголовок
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0,0,0,8)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.Text = "Flux client"
title.TextSize = 20
title.TextColor3 = Color3.new(1,1,1)
title.ZIndex = 3
title.Parent = mainFrame

-- Белая полоска под заголовком
local underline = Instance.new("Frame")
underline.Size = UDim2.new(0, 120, 0, 3)
underline.Position = UDim2.new(0.5, -60, 0, 40)
underline.BackgroundColor3 = Color3.new(1,1,1)
underline.BorderSizePixel = 0
underline.ZIndex = 3
underline.Parent = mainFrame

local underlineCorner = Instance.new("UICorner")
underlineCorner.CornerRadius = UDim.new(0, 2)
underlineCorner.Parent = underline

-- Overlay для Teleporting
local teleportOverlay = Instance.new("Frame")
teleportOverlay.Size = UDim2.new(1,0,1,0)
teleportOverlay.Position = UDim2.new(0,0,0,0)
teleportOverlay.BackgroundColor3 = Color3.fromRGB(50,50,50)
teleportOverlay.BackgroundTransparency = 0.5
teleportOverlay.Visible = false
teleportOverlay.ZIndex = 10
teleportOverlay.Parent = screenGui

local teleportText = Instance.new("TextLabel")
teleportText.Size = UDim2.new(0,200,0,50)
teleportText.Position = UDim2.new(0.5,-100,0.5,-25)
teleportText.BackgroundTransparency = 1
teleportText.Font = Enum.Font.GothamBold
teleportText.Text = "Teleporting..."
teleportText.TextSize = 24
teleportText.TextColor3 = Color3.fromRGB(255,255,255)
teleportText.ZIndex = 11
teleportText.Parent = teleportOverlay

-- Функция создания кнопки с белой обводкой через Frame
local function createMenuButton(yOffset, text)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0,160,0,30)
	btn.Position = UDim2.new(0.5,-80,0,yOffset)
	btn.BackgroundColor3 = Color3.fromRGB(0,0,0)
	btn.BackgroundTransparency = 1
	btn.BorderSizePixel = 0
	btn.Text = text
	btn.TextColor3 = Color3.fromRGB(255,255,255)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 16
	btn.ZIndex = 3
	btn.Parent = mainFrame
	
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0,6)
	corner.Parent = btn
	
	-- Внутренний frame для белой обводки
	local borderFrame = Instance.new("Frame")
	borderFrame.Size = UDim2.new(1,0,1,0)
	borderFrame.Position = UDim2.new(0,0,0,0)
	borderFrame.BackgroundTransparency = 1
	borderFrame.BorderSizePixel = 0
	borderFrame.Parent = btn
	
	local borderCorner = Instance.new("UICorner")
	borderCorner.CornerRadius = UDim.new(0,6)
	borderCorner.Parent = borderFrame
	
	local stroke = Instance.new("UIStroke")
	stroke.Color = Color3.fromRGB(255,255,255)
	stroke.Thickness = 2
	stroke.Parent = borderFrame
	
	-- Tp base работает как обычная кнопка
	if text == "Tp base" then
		btn.MouseButton1Click:Connect(function()
			teleportOverlay.Visible = true
			task.delay(1, function()
				teleportOverlay.Visible = false
			end)
		end)
	else
		-- Остальные кнопки — переключатели
		local active = false
		btn.MouseButton1Click:Connect(function()
			active = not active
			if active then
				btn.BackgroundTransparency = 0
				btn.BackgroundColor3 = Color3.fromRGB(0,100,255)
			else
				btn.BackgroundTransparency = 1
				btn.BackgroundColor3 = Color3.fromRGB(0,0,0)
			end
		end)
	end
end

-- Создаём 3 кнопки
createMenuButton(60, "Tp base")
createMenuButton(100, "Booster")
createMenuButton(140, "Float")

-- Кнопка F (перетаскиваемая)
local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(0, 50, 0, 50)
toggleBtn.Position = UDim2.new(0.5, 100, 0.5, -120)
toggleBtn.AnchorPoint = Vector2.new(0.5,0.5)
toggleBtn.BackgroundColor3 = Color3.fromRGB(40,40,45)
toggleBtn.BorderSizePixel = 0
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.Text = "F"
toggleBtn.TextSize = 26
toggleBtn.TextColor3 = Color3.fromRGB(255,255,255)
toggleBtn.ZIndex = 4
toggleBtn.Parent = screenGui

local btnCorner = Instance.new("UICorner")
btnCorner.CornerRadius = UDim.new(1,0)
btnCorner.Parent = toggleBtn

local btnStroke = Instance.new("UIStroke")
btnStroke.Thickness = 1
btnStroke.Transparency = 0.6
btnStroke.Parent = toggleBtn

-- Перетаскивание окна
local draggingMain = false
local dragStartMain, startPosMain

mainFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		draggingMain = true
		dragStartMain = input.Position
		startPosMain = mainFrame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				draggingMain = false
			end
		end)
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if draggingMain and input.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = input.Position - dragStartMain
		mainFrame.Position = UDim2.new(startPosMain.X.Scale, startPosMain.X.Offset + delta.X, startPosMain.Y.Scale, startPosMain.Y.Offset + delta.Y)
	end
end)

-- Перетаскивание кнопки
local draggingBtn = false
local dragStartBtn, startPosBtn

toggleBtn.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		draggingBtn = true
		dragStartBtn = input.Position
		startPosBtn = toggleBtn.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				draggingBtn = false
			end
		end)
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if draggingBtn and input.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = input.Position - dragStartBtn
		toggleBtn.Position = UDim2.new(startPosBtn.X.Scale, startPosBtn.X.Offset + delta.X, startPosBtn.Y.Scale, startPosBtn.Y.Offset + delta.Y)
	end
end)

-- Переключение видимости меню
local visible = true
toggleBtn.MouseButton1Click:Connect(function()
	visible = not visible
	mainFrame.Visible = visible
end)

-- Центрирование при старте
task.wait(0.1)
mainFrame.Position = UDim2.new(0.5, -100, 0.5, -100)
toggleBtn.Position = UDim2.new(0.5, 100, 0.5, -120)

print("Flux Client GUI загружено — Tp base теперь обычная кнопка, остальные переключатели")
